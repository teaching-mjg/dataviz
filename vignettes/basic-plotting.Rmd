---
title: "Basic Plotting"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Basic Plotting}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

First load libraries.

```{r setup}
library(dataviz)
library(ggplot2)
library(magrittr)
library(dplyr)
```

Examine data

```{r}
data_ala
```

* Use the column names to specify what goes on the `y` axis and what goes on the `x` axis.
* Use `stat_summary` to say that we don't want to plot the raw data, we want a summary statistic instead.
* Use `geom` to say that we want a bar chart, and `fun` to say that we want the mean (as opposed to the median, say). 

```{r}
ggplot(data_ala, aes(y=RT, x=Valence))+
  stat_summary(geom="bar", fun="mean")
```

We can add error bars

```{r}
ggplot(data_ala, aes(y=RT, x=Valence))+
  stat_summary(geom="bar", fun="mean")+
  stat_summary(geom='errorbar', width=0.3, fun.data = mean_cl_normal, fun.args=list(conf.int=.95))
```

We can use colour to distinguish the levels of Valence.

```{r}
ggplot(data_ala, aes(y=RT, x=Valence, colour=Valence, fill=Valence))+
  stat_summary(geom="bar", fun="mean", alpha=0.5)+
  stat_summary(geom='errorbar', width=0.3, fun.data = mean_cl_normal, 
               fun.args=list(conf.int=.95), show.legend = F)
```

Let's imagine that we had data on the age of the participants: Younger vs Older

```{r}
data_ala_age <- data_ala %>% 
  mutate(Age=ifelse(Participant %% 2, "Older", "Younger"))
```

Let's imagine that younger people were quicker to respond.

```{r}
data_ala_age <- data_ala_age %>% 
  mutate(RT.adjustment=runif(n=nrow(data_ala_age), min=0, max=0.5)) %>% 
  mutate(RT=ifelse(Age=="Younger", RT-RT.adjustment, RT))
```

Let's separate out the two groups of Age

```{r, fig.width=7, fig.height=5}
ggplot(data_ala_age, aes(y=RT, x=Valence, colour=Valence, fill=Valence))+
  stat_summary(geom="bar", fun="mean", alpha=0.5)+
  stat_summary(geom="line", fun="mean", aes(group=1), colour="black")+
  stat_summary(geom='errorbar', width=0.3, fun.data = mean_cl_normal, 
               fun.args=list(conf.int=.95), show.legend = F)+
  stat_summary(geom='point', fun="mean", size=3, show.legend = F)+
  facet_grid(~Age)
```

## Excercises

1. How did we add colour? What additional code did we have to include?
1. What element of a `ggplot` plots separate facets?
